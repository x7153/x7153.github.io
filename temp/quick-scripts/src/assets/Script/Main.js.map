{"version":3,"sources":["assets\\Script\\Main.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import {VoPrefabImg} from \"./node/VoPrefabImg\";\r\nimport { PoolMgr } from \"./mgr/PoolMgr\";\r\nimport { VoPrefabLove } from \"./node/VoPrefabLove\";\r\n\r\nexport var SumImgNum = 61\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Main extends cc.Component {\r\n    @property(cc.Sprite)\r\n    imgBg:cc.Sprite;\r\n\r\n    private loadedResCount: number = 0;\r\n    \r\n    start () {\r\n        let loadAssets = []\r\n        for(let i = 0; i < SumImgNum; ++i){\r\n            let voUrl = {url:\"./imgs/voImg(\"+ i +\")\", type:cc.SpriteFrame}\r\n            loadAssets.push(voUrl)\r\n        }\r\n\r\n        for(let i = 0; i < loadAssets.length; ++i){\r\n            cc.loader.loadRes(loadAssets[i].url, loadAssets[i].type, this.onLoadComplete.bind(this));\r\n        }\r\n\r\n        //this.imgBg.node.on(cc.Node.EventType.TOUCH_START, this.onBgClick, this)\r\n        \r\n        let show = cc.fadeIn(3)\r\n        this.imgBg.node.runAction(            \r\n            cc.sequence(\r\n                show,\r\n                cc.callFunc(()=>{\r\n                    this.imgBg.node.on(cc.Node.EventType.TOUCH_START, this.onBgClick, this)\r\n                })\r\n        ))\r\n    }\r\n\r\n    private onBgClick(EventType){\r\n        if(this.loadedResCount < SumImgNum){\r\n            return;\r\n        }\r\n\r\n        let worldPoint = EventType.getLocation()\r\n        let love:VoPrefabLove = PoolMgr.instance.getVoLovePrefab();\r\n        love.getComponent(cc.ParticleSystem).node.parent = this.imgBg.node;\r\n        love.getComponent(cc.ParticleSystem).node.setPosition(worldPoint.x , worldPoint.y); \r\n\r\n        let img:VoPrefabImg = PoolMgr.instance.getVoImg();\r\n        img.getComponent(\"VoPrefabImg\").node.parent = this.imgBg.node;  \r\n        img.getComponent(\"VoPrefabImg\").node.setPosition(worldPoint.x , worldPoint.y);    \r\n    }\r\n\r\n    private onLoadComplete(err, res){\r\n        this.loadedResCount += 1;    \r\n        if(err){\r\n            console.log(err);\r\n        }else{\r\n            console.log( String(\"加载资源 \" + res._name +    \" , no.\" +this.loadedResCount) );\r\n        }\r\n    }\r\n}\r\n\r\n"]}